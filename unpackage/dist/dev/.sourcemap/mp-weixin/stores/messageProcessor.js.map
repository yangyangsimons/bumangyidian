{"version":3,"file":"messageProcessor.js","sources":["stores/messageProcessor.js"],"sourcesContent":["// stores/messageProcessor.js\nimport { defineStore } from 'pinia'\nimport { useBarrageStore } from './barrage'\nimport { useAudioPlayerStore } from './audioPlayer'\nimport { ref } from 'vue'\nimport { useSendStore } from './send'\nimport { useIsRadioStore } from './isRadio'\n\nexport const useMessageProcessorStore = defineStore('messageProcessor', () => {\n  const barrageStore = useBarrageStore()\n  const audioPlayerStore = useAudioPlayerStore()\n  const sendStore = useSendStore()\n  const isRadioStore = useIsRadioStore()\n\n  // Â§ÑÁêÜÊé•Êî∂Âà∞ÁöÑÊµÅÂºèÊ∂àÊÅØ\n  const isStreaming = ref(false)\n  const accumulatedText = ref('')\n  const lastSectionId = ref(null)\n\n  // Ê∑ªÂä†Ê≠åËØçÁõ∏ÂÖ≥Áä∂ÊÄÅ\n  const lyricSyncInterval = ref(null)\n  const currentLyrics = ref([])\n  const lyricMessageId = ref(null)\n  const currentLyricIndex = ref(-1)\n\n  // Â§ÑÁêÜÊé•Êî∂Âà∞ÁöÑÊ∂àÊÅØ\n  const processMessage = (data) => {\n    // Â¶ÇÊûúÊòØÂ≠óÁ¨¶‰∏≤ÔºåÂÖàÂ∞ùËØïËß£Êûê‰∏∫JSON\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data)\n      } catch (e) {\n        console.error('Ê∂àÊÅØËß£ÊûêÂ§±Ë¥•', e)\n        // ‰Ωú‰∏∫Á∫ØÊñáÊú¨Ê∂àÊÅØÂ§ÑÁêÜ\n        showTextMessage(data)\n        return\n      }\n    }\n\n    // Ê†πÊçÆcmdÁ±ªÂûãÂ§ÑÁêÜ‰∏çÂêåÊ∂àÊÅØ\n    switch (data.cmd) {\n      case 'bg_music':\n        handleBgMusic(data)\n        break\n      case 'audio':\n        handleTtsAudio(data)\n        break\n      case 'finish':\n        handleFinishMessage(data)\n        break\n      case 'subject':\n        handleSubjectRequest(data)\n        break\n      case 'error':\n        handleErrorMessage(data)\n        break\n      default:\n        // Êú™Áü•Ê∂àÊÅØÁ±ªÂûãÔºåÂ∞ùËØï‰Ωú‰∏∫ÊñáÊú¨ÊòæÁ§∫\n        console.warn('Êú™Áü•Ê∂àÊÅØÁ±ªÂûã', data)\n        if (data.text || data.msg) {\n          showTextMessage(data.text || data.msg)\n        }\n    }\n  }\n\n  // Â§ÑÁêÜËÉåÊôØÈü≥‰πêÊ∂àÊÅØ\n  const handleBgMusic = (data) => {\n    console.log('Êî∂Âà∞ËÉåÊôØÈü≥‰πêÊ∂àÊÅØ', data)\n    const { audio_url, play_time, section_id, audio_id } = data\n\n    // Êí≠ÊîæËÉåÊôØÈü≥‰πê\n    audioPlayerStore.playBgMusic(audio_url, play_time, section_id, audio_id)\n\n    // ËÆæÁΩÆËÉåÊôØÈü≥‰πêÂæ™ÁéØÊí≠Êîæ\n    audioPlayerStore.setBgLoop(true)\n\n    // ÊòØ‰∏çÊòØÂπøÊí≠Ê®°Âºè\n    if (data.is_radio && data.is_radio == 1) {\n      console.log('ÂΩìÂâçÊòØÂπøÊí≠Ê®°Âºè')\n      isRadioStore.setIsRadio(true)\n      audioPlayerStore.setBgLoop(false) // ËÆæÁΩÆ‰∏∫‰∏çÂæ™ÁéØÊí≠Êîæ\n\n      // Â§ÑÁêÜÊ≠åËØç\n      if (data.lrc) {\n        console.log('ÂΩìÂâçÊòØÂπøÊí≠Ê®°Âºè,Ê≠åËØç:', data.lrc)\n        handleLyrics(data.lrc, play_time || 0)\n      }\n    }\n\n    // ÂèØ‰ª•ÈÄâÊã©ÊòØÂê¶Âú®ÂØπËØùÁïåÈù¢ÊòæÁ§∫Èü≥‰πêÊí≠Êîæ‰ø°ÊÅØ\n    // barrageStore.addMessage({\n    //   type: 'system',\n    //   content: 'üéµ ËÉåÊôØÈü≥‰πêÊí≠Êîæ‰∏≠...',\n    //   showInUI: false, // Â¶ÇÊûú‰∏çÊÉ≥Âú®ÁïåÈù¢ÊòæÁ§∫ÔºåÂèØ‰ª•ËÆæÁΩÆÊ†áËÆ∞\n    // })\n  }\n\n  // Â§ÑÁêÜÊ≠åËØçÊï∞ÊçÆ\n  const handleLyrics = (lyricsData, play_time) => {\n    // ÂÅúÊ≠¢‰πãÂâçÂèØËÉΩÂ≠òÂú®ÁöÑÊ≠åËØçÂêåÊ≠•\n    stopLyricSync()\n\n    // ‰øùÂ≠òÊ≠åËØçÊï∞ÊçÆ‰ª•‰æøÂêéÁª≠‰ΩøÁî®\n    currentLyrics.value = lyricsData\n    currentLyricIndex.value = -1\n\n    // ÂêØÂä®Ê≠åËØçÂêåÊ≠•\n    startLyricSync(lyricsData, play_time)\n  }\n\n  // ÂêØÂä®Ê≠åËØçÂêåÊ≠•\n  // ÂêØÂä®Ê≠åËØçÂêåÊ≠•\n  const startLyricSync = (lyricsData, play_time) => {\n    // ÂÖàÂÅúÊ≠¢‰πãÂâçÂèØËÉΩÂ≠òÂú®ÁöÑÂêåÊ≠•\n    stopLyricSync()\n\n    // Ëß£ÊûêÊó∂Èó¥Ê†ºÂºèÔºåÂ∞ÜÊ≠åËØçÊï∞ÊçÆÂ§ÑÁêÜÊàêÊõ¥Êòì‰∫é‰ΩøÁî®ÁöÑÊ†ºÂºè\n    const parsedLyrics = lyricsData.map((item) => ({\n      text: item.text,\n      startTime: parseTimeToSeconds(item.start),\n    }))\n\n    console.log('Ëß£ÊûêÂêéÁöÑÊ≠åËØçÊï∞ÊçÆ:', parsedLyrics)\n\n    // ËÆæÁΩÆÂêåÊ≠•ÂÆöÊó∂Âô®\n    lyricSyncInterval.value = setInterval(() => {\n      if (audioPlayerStore.bgIsPlaying) {\n        const currentTime = audioPlayerStore.bgPlayTime\n        updateLyricByTime(currentTime, parsedLyrics, play_time)\n      }\n    }, 1000) // ÊØè100ÊØ´ÁßíÊ£ÄÊü•‰∏ÄÊ¨°\n  }\n\n  // ÂÅúÊ≠¢Ê≠åËØçÂêåÊ≠•\n  const stopLyricSync = () => {\n    if (lyricSyncInterval.value) {\n      clearInterval(lyricSyncInterval.value)\n      lyricSyncInterval.value = null\n    }\n  }\n\n  // Ê†πÊçÆÂΩìÂâçÊó∂Èó¥Êõ¥Êñ∞Ê≠åËØçÊòæÁ§∫\n  const updateLyricByTime = (currentTime, lyrics, play_time) => {\n    // ÊâæÂá∫ÂΩìÂâçÂ∫îËØ•ÊòæÁ§∫ÁöÑÊ≠åËØç\n    let newIndex = -1\n\n    for (let i = 0; i < lyrics.length; i++) {\n      if (currentTime >= lyrics[i].startTime) {\n        newIndex = i\n      } else {\n        // ÊâæÂà∞ÊØîÂΩìÂâçÊó∂Èó¥Â§ßÁöÑÂ∞±ÂÅúÊ≠¢ÔºåÂõ†‰∏∫Ê≠åËØçÊòØÊåâÊó∂Èó¥ÊéíÂ∫èÁöÑ\n        break\n      }\n    }\n\n    // Â¶ÇÊûúÊâæÂà∞ÊúâÊïàÁöÑÊ≠åËØç‰∏î‰∏éÂΩìÂâçÊòæÁ§∫ÁöÑ‰∏çÂêåÔºåÊõ¥Êñ∞ÊòæÁ§∫\n    if (newIndex !== -1 && newIndex !== currentLyricIndex.value) {\n      currentLyricIndex.value = newIndex\n      console.log('ÂΩìÂâçÊ≠åËØçÁ¥¢Âºï:', newIndex)\n      if (play_time != 0 && currentTime == 0) {\n        console.log(currentTime, 'ÂΩìÂâçÊó∂Èó¥:', currentTime)\n      } else {\n        // ‰øÆÊîπËøôÈáåÔºö‰∏çÊòØÊõ¥Êñ∞Áé∞ÊúâÊ≠åËØçÔºåËÄåÊòØÊ∑ªÂä†Êñ∞ÁöÑÊ≠åËØçÊ∂àÊÅØ\n        addLyricMessage(lyrics[newIndex].text)\n      }\n    }\n  }\n\n  // Êõ¥Êñ∞Ê≠åËØçÊòæÁ§∫\n  // Ê∑ªÂä†Êñ∞ÁöÑÊ≠åËØçÊ∂àÊÅØ (Êñ∞Â¢ûÂáΩÊï∞)\n  const addLyricMessage = (text) => {\n    // ÂàõÂª∫Êñ∞ÁöÑÊ≠åËØçÊ∂àÊÅØÔºåËÄå‰∏çÊòØÊõ¥Êñ∞Áé∞ÊúâÊ∂àÊÅØ\n    barrageStore.addMessage({\n      type: 'lyric',\n      content: text,\n      isLyric: true,\n    })\n\n    console.log('Ê∑ªÂä†Êñ∞Ê≠åËØç:', text)\n  }\n\n  // Â∞ÜÊó∂Èó¥Â≠óÁ¨¶‰∏≤ËΩ¨Êç¢‰∏∫ÁßíÊï∞\n  const parseTimeToSeconds = (timeStr) => {\n    if (!timeStr) return 0\n\n    const parts = timeStr.split(':')\n    let seconds = 0\n\n    if (parts.length === 3) {\n      // Ê†ºÂºè‰∏∫ \"h:mm:ss.ms\"\n      seconds =\n        parseInt(parts[0]) * 3600 +\n        parseInt(parts[1]) * 60 +\n        parseFloat(parts[2])\n    } else if (parts.length === 2) {\n      // Ê†ºÂºè‰∏∫ \"m:ss.ms\"\n      seconds = parseInt(parts[0]) * 60 + parseFloat(parts[1])\n    } else {\n      // Ê†ºÂºè‰∏∫ \"ss.ms\"\n      seconds = parseFloat(parts[0])\n    }\n\n    return seconds\n  }\n\n  // Â§ÑÁêÜTTSÈü≥È¢ëÊ∂àÊÅØ\n  const handleTtsAudio = (data) => {\n    console.log('Êî∂Âà∞TTSÈü≥È¢ëÊ∂àÊÅØ', data)\n    if (data.is_radio && data.is_radio == 1) {\n      console.log('ÂΩìÂâçÊòØÂπøÊí≠Ê®°Âºè')\n      isRadioStore.setIsRadio(true)\n    }\n    const { audio_url, section_id, audio_id, text } = data\n    //ËÆæÁΩÆ‰∏∫‰∏çËÉΩÂèëÈÄÅÊ∂àÊÅØ\n    sendStore.setSend(false)\n    // ËÆ∞ÂΩïÂΩìÂâçÂ§ÑÁêÜÁöÑsection_id\n    lastSectionId.value = section_id\n\n    // // Êí≠ÊîæTTSÈü≥È¢ë\n    audioPlayerStore.playTtsAudio(audio_url, section_id, audio_id)\n    if (text) {\n      console.log('Â§ÑÁêÜÊñáÊú¨:')\n\n      // Â¶ÇÊûúÊòØÊñ∞ÁöÑÂØπËØùÊàñÊñ∞ÁöÑsectionÔºåÂºÄÂßãÊñ∞ÁöÑÊµÅÂºèÊ∂àÊÅØ\n      if (!isStreaming.value || lastSectionId.value !== section_id) {\n        console.log('ÂºÄÂßãÊñ∞ÁöÑÊµÅÂºèÊ∂àÊÅØ', {\n          isStreaming: isStreaming.value,\n          lastSectionId: lastSectionId.value,\n          newSectionId: section_id,\n        })\n        isStreaming.value = true\n        accumulatedText.value = ''\n        barrageStore.startNewStreamingMessage()\n      }\n\n      // Á¥ØÁßØÊñáÊú¨\n      accumulatedText.value += text\n\n      // ÂêëÂºπÂπïÊ∑ªÂä†ÊñáÊú¨\n      barrageStore.appendToStreamingMessage(text)\n\n      console.log('ÂΩìÂâçÁ¥ØÁßØÊñáÊú¨:', accumulatedText.value)\n    }\n  }\n\n  // Â§ÑÁêÜÁªìÊùüÊ∂àÊÅØ\n  const handleFinishMessage = (data) => {\n    console.log('Êî∂Âà∞ÁªìÊùüÊ∂àÊÅØ', data)\n    // ËÆæÁΩÆÂèØ‰ª•ÂèëÈÄÅÊ∂àÊÅØ\n    sendStore.setSend(true)\n    const { full_text } = data\n\n    // Â¶ÇÊûúÊúâfull_textÔºåÁî®ÂÆÉÊõøÊç¢Á¥ØÁßØÁöÑÊñáÊú¨\n    if (full_text) {\n      accumulatedText.value = full_text\n    }\n\n    // ÁªìÊùüÊµÅÂºèÊ∂àÊÅØÔºå‰ΩøÁî®Á¥ØÁßØÁöÑÊñáÊú¨Êàñfull_text\n    barrageStore.finishStreamingMessage(full_text || accumulatedText.value)\n\n    // ÈáçÁΩÆÊµÅÂºèÁä∂ÊÄÅ\n    isStreaming.value = false\n    accumulatedText.value = ''\n  }\n\n  // Â§ÑÁêÜ‰∏ªÈ¢òÈÄâÊã©ËØ∑Ê±Ç\n  const handleSubjectRequest = (data) => {\n    console.log('Êî∂Âà∞‰∏ªÈ¢òÈÄâÊã©ËØ∑Ê±Ç', data)\n    const subjects = data.subjects.join('\\n')\n    console.log('ÂèØÈÄâ‰∏ªÈ¢òÂàóË°®', subjects)\n    // ÊòæÁ§∫ÂèØÈÄâ‰∏ªÈ¢òÂàóË°®\n    barrageStore.addMessage({\n      type: 'subject',\n      content: data.msg + '\\n' + subjects,\n    })\n  }\n\n  // Â§ÑÁêÜÈîôËØØÊ∂àÊÅØ\n  const handleErrorMessage = (data) => {\n    console.log('Êî∂Âà∞ÈîôËØØÊ∂àÊÅØ', data)\n    const { text } = data\n\n    // ÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØ\n    uni.showToast({\n      title: text || 'Á≥ªÁªüÈîôËØØ',\n      icon: 'none',\n      duration: 2000,\n    })\n  }\n\n  // ÈÄöÁî®ÊòæÁ§∫ÊñáÊú¨Ê∂àÊÅØ\n  const showTextMessage = (text, type = 'ai') => {\n    if (!text) return\n\n    barrageStore.addMessage({\n      type: type,\n      content: text,\n    })\n  }\n\n  // Ê∑ªÂä†‰∏Ä‰∏™ÈáçÁΩÆÊñπÊ≥ï\n  const resetProcessor = () => {\n    isStreaming.value = false\n    accumulatedText.value = ''\n    lastSectionId.value = null\n\n    // ÂÅúÊ≠¢Ê≠åËØçÂêåÊ≠•\n    stopLyricSync()\n    currentLyrics.value = []\n    lyricMessageId.value = null\n    currentLyricIndex.value = -1\n  }\n\n  return {\n    processMessage,\n    resetProcessor,\n    isStreaming,\n    accumulatedText,\n\n    // Êö¥Èú≤Ê≠åËØçÁõ∏ÂÖ≥ÊñπÊ≥ïÔºàÂ¶ÇÊûúÈúÄË¶ÅÂú®Â§ñÈÉ®Ë∞ÉÁî®Ôºâ\n    stopLyricSync,\n    currentLyrics,\n    currentLyricIndex,\n  }\n})\n"],"names":["defineStore","useBarrageStore","useAudioPlayerStore","useSendStore","useIsRadioStore","ref","uni"],"mappings":"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"}