{"version":3,"file":"app.js","sources":["App.vue","main.js"],"sourcesContent":["<script>\r\n  export default {\r\n    onLaunch: function () {\r\n      const updateManager = wx.getUpdateManager()\r\n\r\n      updateManager.onCheckForUpdate(function (res) {\r\n        // 请求完新版本信息的回调\r\n        console.log('版本更新的回调', res.hasUpdate)\r\n      })\r\n\r\n      updateManager.onUpdateReady(function () {\r\n        wx.showModal({\r\n          title: '更新提示',\r\n          content: '新版本已经准备好，是否重启应用？',\r\n          success(res) {\r\n            if (res.confirm) {\r\n              // 新的版本已经下载好，调用 applyUpdate 应用新版本并重启\r\n              updateManager.applyUpdate()\r\n            }\r\n          },\r\n        })\r\n      })\r\n\r\n      updateManager.onUpdateFailed(function () {\r\n        // 新版本下载失败\r\n      })\r\n\r\n      console.log('App Launch')\r\n      // 判断用户是否授权\r\n      const token = uni.getStorageSync('token')\r\n      if (!token) {\r\n        console.log('游客身份体验')\r\n        //游客身份体验\r\n        uni.setStorage({\r\n          key: 'tourist',\r\n          data: true,\r\n          success: (result) => {\r\n            console.log('游客身份存储成功:', result)\r\n          },\r\n        })\r\n        //新手引导页设置token\r\n        uni.setStorage({\r\n          key: 'isFirst',\r\n          data: true,\r\n          success: (result) => {\r\n            console.log('首次使用存储成功:', result)\r\n            uni.reLaunch({\r\n              url: '/pages/index/index',\r\n            })\r\n          },\r\n          fail: (error) => {\r\n            console.log('首次使用存储失败:', error)\r\n            uni.showToast({\r\n              title: '游客身份体验失败',\r\n              icon: 'none',\r\n            })\r\n          },\r\n        })\r\n      } else {\r\n        uni.request({\r\n          url: 'https://mang.5gradio.com.cn:443/user/user_info',\r\n          header: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n          method: 'GET',\r\n          success: (res) => {\r\n            console.log('获取用户信息', res)\r\n            if (res.data.code === 0 && res.data.data.birth) {\r\n              console.log('用户已注册生日是：', res.data.data.birth)\r\n              uni.reLaunch({\r\n                url: '/pages/index/index',\r\n              })\r\n            } else if (res.data.code === 0 && !res.data.data.birth) {\r\n              console.log('用户未注册')\r\n              uni.reLaunch({\r\n                url: '/pages/hello/hello',\r\n              })\r\n            } else {\r\n              uni.reLaunch({\r\n                url: '/pages/login/login',\r\n              })\r\n            }\r\n          },\r\n          fail: (error) => {},\r\n        })\r\n        // uni.reLaunch({\r\n        //   url: '/pages/questionnaire/questionnaire',\r\n        // })\r\n      }\r\n    },\r\n    onShow: function () {\r\n      console.log('App Show')\r\n    },\r\n    onHide: function () {\r\n      console.log('App Hide')\r\n    },\r\n  }\r\n</script>\r\n\r\n<style>\r\n  /*每个页面公共css */\r\n</style>\r\n","import App from './App'\n\n// #ifndef VUE3\nimport Vue from 'vue'\nimport './uni.promisify.adaptor'\n\nVue.config.productionTip = false\nApp.mpType = 'app'\nconst app = new Vue({\n  ...App,\n})\napp.$mount()\n// #endif\n\n// #ifdef VUE3\nimport { createSSRApp } from 'vue'\nimport * as Pinia from 'pinia'\nexport function createApp() {\n  const app = createSSRApp(App)\n  app.use(Pinia.createPinia())\n  return {\n    app,\n    Pinia,\n  }\n}\n// #endif\n"],"names":["wx","uni","createSSRApp","App","Pinia.createPinia","Pinia"],"mappings":";;;;;;;;;;;AACE,MAAK,YAAU;AAAA,EACb,UAAU,WAAY;AACpB,UAAM,gBAAgBA,cAAE,KAAC,iBAAiB;AAE1C,kBAAc,iBAAiB,SAAU,KAAK;AAE5CC,oBAAY,MAAA,MAAA,OAAA,gBAAA,WAAW,IAAI,SAAS;AAAA,KACrC;AAED,kBAAc,cAAc,WAAY;AACtCD,oBAAAA,KAAG,UAAU;AAAA,QACX,OAAO;AAAA,QACP,SAAS;AAAA,QACT,QAAQ,KAAK;AACX,cAAI,IAAI,SAAS;AAEf,0BAAc,YAAY;AAAA,UAC5B;AAAA,QACD;AAAA,OACF;AAAA,KACF;AAED,kBAAc,eAAe,WAAY;AAAA,KAExC;AAEDC,kBAAAA,MAAA,MAAA,OAAA,iBAAY,YAAY;AAExB,UAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACxC,QAAI,CAAC,OAAO;AACVA,oBAAAA,MAAA,MAAA,OAAA,iBAAY,QAAQ;AAEpBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,QACL,MAAM;AAAA,QACN,SAAS,CAAC,WAAW;AACnBA,wBAAAA,MAAY,MAAA,OAAA,iBAAA,aAAa,MAAM;AAAA,QAChC;AAAA,OACF;AAEDA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,QACL,MAAM;AAAA,QACN,SAAS,CAAC,WAAW;AACnBA,wBAAAA,MAAY,MAAA,OAAA,iBAAA,aAAa,MAAM;AAC/BA,wBAAAA,MAAI,SAAS;AAAA,YACX,KAAK;AAAA,WACN;AAAA,QACF;AAAA,QACD,MAAM,CAAC,UAAU;AACfA,wBAAAA,MAAA,MAAA,OAAA,iBAAY,aAAa,KAAK;AAC9BA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,WACP;AAAA,QACF;AAAA,OACF;AAAA,WACI;AACLA,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAK;AAAA,QACL,QAAQ;AAAA,UACN,gBAAgB;AAAA,UAChB,eAAe,UAAU,KAAK;AAAA,QAC/B;AAAA,QACD,QAAQ;AAAA,QACR,SAAS,CAAC,QAAQ;AAChBA,wBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU,GAAG;AACzB,cAAI,IAAI,KAAK,SAAS,KAAK,IAAI,KAAK,KAAK,OAAO;AAC9CA,8DAAY,aAAa,IAAI,KAAK,KAAK,KAAK;AAC5CA,0BAAAA,MAAI,SAAS;AAAA,cACX,KAAK;AAAA,aACN;AAAA,qBACQ,IAAI,KAAK,SAAS,KAAK,CAAC,IAAI,KAAK,KAAK,OAAO;AACtDA,0BAAAA,MAAA,MAAA,OAAA,iBAAY,OAAO;AACnBA,0BAAAA,MAAI,SAAS;AAAA,cACX,KAAK;AAAA,aACN;AAAA,iBACI;AACLA,0BAAAA,MAAI,SAAS;AAAA,cACX,KAAK;AAAA,aACN;AAAA,UACH;AAAA,QACD;AAAA,QACD,MAAM,CAAC,UAAU;AAAA,QAAE;AAAA,OACpB;AAAA,IAIH;AAAA,EACD;AAAA,EACD,QAAQ,WAAY;AAClBA,kBAAAA,oCAAY,UAAU;AAAA,EACvB;AAAA,EACD,QAAQ,WAAY;AAClBA,kBAAAA,oCAAY,UAAU;AAAA,EACvB;AACH;AChFK,SAAS,YAAY;AAC1B,QAAM,MAAMC,cAAY,aAACC,SAAG;AAC5B,MAAI,IAAIC,cAAAA,aAAmB;AAC3B,SAAO;AAAA,IACL;AAAA,IACJ,OAAIC,cAAK;AAAA,EACN;AACH;;;"}